# Mgice と Git を連携する環境を整える（初回のみ）

## 準備

以下の３種の神器を予めインストールしておきます。

- Git をインストールする  
  まず Git とはなにかですが、一般的にはバージョン管理ソフトと呼ばれる部類のものになります。ざっくり簡単に表現すると「様々なファイルの追加・編集・削除などの内容を保存しておき、別のコンピュータでも同じ状況を再現することができる」ものだと考えていただくのが良いかと思います。

https://git-scm.com/

- Tortoise Git をインストールする  
  TortoiseGit とは,Git をより扱いやすくするために開発された Windows 用ソフトウェアです。無料で扱うことができ、コマンドを打ち込んで実行するという少し初心者にはハードルの高い状態をこの TortoiseGit が解消してくれます。

https://tortoisegit.org/

- Magic compare & merge をインストールする  
  ファイルの一式とライセンスを手に入れてから、インストールをします。

- プロジェクトの受け入れ先をローカルフォルダに作る  
  基本的に「 C:\USER\~ 」のディレクトリにプロジェクト名と同じフォルダを作ります。
  作成したフォルダの中に「 mg 」「 ng 」２つのフォルダを作ります。
  - mg フォルダ：Magic のプログラム内容をインストールします
  - ng フォルダ：Anglar の内容をインストールします  
    ![](imgs/2023-06-14-13-34-01.png)

# すでに Git 上に存在するプロジェクトを初めて自分の環境に持って来る場合

準備が出来たら、いよいよプロジェクトの同期をとります。

## 同期をとる

1. Magic xpa 4.9 Enteerprise Studio を開く

   1. ファイルメニューから　バージョン管理＞ Git の設定　を開きます
      ![](imgs/2023-06-14-10-20-55.png)
   1. 設定の中から　 Git 　を選び Git hab と Magic を紐づけます

   - 名前には Git hab へ登録しているサインイン名を入力します
   - メールには同じく登録しているメールアドレスを入力します
     ![](imgs/2023-06-14-10-03-16.png)

   1. 同期をとりたいプロジェクトを選びます

      1. ファイルメニュー＞バージョン管理＞ Git リポジトリのクローン　を選びます
         ![](imgs/2023-06-14-09-59-51.png)
      1. Git hub から同期をとりたいプロジェクトの URL を設定し、ディレクトリが準備した「 mg 」フォルダにあることを確認します
         ![](imgs/2023-06-14-10-41-53.png)  
         URL の場所はというと・・・  
         Git hub ににあるそれぞれのプロジェクトによって変わります。  
         プロジェクト内の「 <> Code ▼ 」ボタン＞「 Local 」タブ＞「 HTTPS 」に書かれている URL をコピーし、そのまま貼り付けます。  
         ![](imgs/2023-06-14-10-51-03.png)
      1. 「ブランチ」にチェックをして「 develop 」と入力します
         Magic と Angula のプロジェクトでは develop から派生させたブランチでしか編集しません。
         ![](imgs/2023-06-14-11-38-49.png)
      1. 「OK」をします  
         実行ウィンドウに「成功」の文字が表示されたら「閉じる」ボタンで閉じます
         ![](imgs/2023-06-14-13-57-21.png)
      1. ローカルフォルダを確認して、ini ファイルなど必要なファイルがあればフォルダ内に移植します。

      ## ※注意点※

      リポジトリをクローンする際に必ず注意したい点は「 develop 」の内容と同期させることです。  
       ![](imgs/2023-06-14-11-37-04.png)  
       ![](imgs/2023-06-14-11-38-49.png)

      - 「開発者 ID」で引っかかる場合  
        つなぎたい Githab 内の自分のアカウントについて、権限を確認してください。
        「メンバー」状態だと権限がなく、「オーナー」にする必要があります。  
        ![](imgs/2023-06-19-11-56-52.png)

   1. Compare & Merge の設定をします

      1. プロジェクトを開きます。確認の画面が出るので「OK」ボタンを押します。  
         ![](imgs/2023-06-14-14-04-18.png)
      1. 2 行目の Compare & Merge ユーティリティ設定が「×」の印なので「設定…」を押します  
         ![](imgs/2023-06-14-14-05-36.png)
      1. ローカルフォルダが開き Compare & Merge に必要なフォルダが表示されます  
         C:\Program Files (x86)\Magic Compare 4
         その中でも「 merge.exe 」を開きます  
          ![](imgs/2023-06-14-14-08-05.png)
      1. するとユーティリティの設定が終わります  
         ![](imgs/2023-06-14-14-10-38.png)

   1. コミットの準備をします

      1. プロジェクトが開いたらブランチが develop で開いているか確認してください
         ![](imgs/2023-06-14-14-26-44.png)

      1. ファイルメニューから  
         バージョン管理＞コミット　を行います
         ![](imgs/2023-06-14-14-47-22.png)
      1. コミット画面が表示されるのでコメントを書き込み、コミットボタンを押します。  
         ![](imgs/2023-06-14-14-52-06.png)
      1. 実行画面に「成功」画面が出たら、閉じるを押します。  
         ![](imgs/2023-06-14-14-52-48.png)

   1. Git flow を初期化します（初回同期だけの設定）

      1. ファイルメニューから  
         バージョン管理＞ Git Flow ＞ Git Flow の初期化  
         ![](imgs/2023-06-14-14-28-58.png)
      1. 確認画面が出るので Yes で待ちます。
         ![](imgs/2023-06-14-14-45-20.png)  
         意味はヘルプをご参照ください
         file:///C:/Magic/Studio49/Help/index.htm?rhcsh=1%3Frhmapno%3D0#t=mergedProjects%2FTechnical%20Notes%2FConcept_Papers%2FConnecting_Magic_xpa_with_Git_Repository%2FTroubleshooting_Git_Command_Issues.htm&rhsearch=GITScripts%20xpa&rhhlterm=GITScripts%20xpa&rhsyns=%20

         「Yes」を押した後は完了したなどの表記は出ません。

         何も編集がない場合はここで終わっても OK です。

      ## ※注意点※

      - 初期化できないとき  
        ![](imgs/2023-06-19-16-55-04.png)  
        master ブランチがないと develop が初期化できないと表示が出ます。
        その場合は master ブランチを追加します。

      1. ファイルメニューから
         バージョン管理＞ ブランチを作成  
         ![](imgs/2023-06-19-16-58-47.png)
      1. ブランチ名を「master」&基点を「HEAD」  
         ![](imgs/2023-06-19-16-59-52.png)
      1. バージョン管理＞ 切り替え/チェックアウト  
         ![](imgs/2023-06-19-17-01-30.png)
      1. ブランチから「master」を選ぶ  
         ![](imgs/2023-06-19-17-02-53.png)
      1. Git と同期をする  
         ![](imgs/2023-06-19-17-04-10.png)
      1. そのままプッシュボタンを押して OK  
         ![](imgs/2023-06-19-17-05-00.png)
      1. Githab 上に master ができているか確認します  
         ![](imgs/2023-06-19-17-06-46.png)

## 編集を始める

1. Git hub からプルしてきます
1. 自分用の Feature を分岐させて編集を始めます
   1. ファイルメニューから
      バージョン管理＞ Git Flow ＞ Git Flow の Feature の開始  
      ![](imgs/2023-06-14-15-50-54.png)
   1. 自分用の Feature 名をつける＞ＯＫボタン  
      ![](imgs/2023-06-14-15-59-48.png)
   1. Feature 名が設定したものだったら成功です  
      ![](imgs/2023-06-14-16-05-16.png)

## 編集を終わる

1. コミットをする

   1. コミット先が自分用の Feature 名であることを確認します
   1. コメントを書きコミットします  
      ![](imgs/2023-06-14-16-25-15.png)
      ![](imgs/2023-06-14-16-39-50.png)

1. Feature を終了します

   1. ファイルメニューから
      バージョン管理＞ Git Flow ＞ Git Flow の Feature の終了  
      ![](imgs/2023-06-14-16-27-54.png)
   1. Feature を開始したときにつけた名前を入力します  
      ![](imgs/2023-06-14-16-40-41.png)
      以下の注意が出たら「はい」を押して待ちます  
      ![](imgs/2023-06-14-16-41-26.png)
   1. ブランチが develop に戻っていることを確認します
      ![](imgs/2023-06-14-16-42-57.png)

1. Git と同期をとる

   1. ファイルメニューから  
      バージョン管理＞ Git と同期  
      ![](imgs/2023-06-19-10-56-20.png)

   1. プッシュ画面＞「送り出しコミット」にコミットしたファイルを確認＞プッシュボタンを押します  
      ![](imgs/2023-06-19-11-24-54.png)

   1. 「成功」が表示されたら「閉じる」ボタンを押して完了します  
      ![](imgs/2023-06-19-11-29-58.png)

# Anglar の同期をとる

「 0300VSCode.md 」のファイルを参照します
